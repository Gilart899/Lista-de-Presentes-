<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lista de Presentes — Cris & Edson</title>

  <!-- Fontes: Playfair Display (serif) para cabeçalho, Inter para textos -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#fbfbfb;
      --card:#ffffff;
      --muted:#6b6b6b;
      --gold-1:#cfa34a;
      --gold-2:#b8860b;
      --accent:#0f172a;
      --glass: rgba(255,255,255,0.7);
      --shadow: 0 10px 30px rgba(11,15,31,0.08);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background:
        radial-gradient(1200px 400px at 10% 10%, rgba(250,243,227,0.6), transparent 8%),
        linear-gradient(180deg,var(--bg),#ffffff);
      color:var(--accent);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:36px;
      display:flex;
      align-items:flex-start;
      justify-content:center;
    }

    .wrap{
      width:100%;
      max-width:980px;
      background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.95));
      border-radius:16px;
      box-shadow: var(--shadow);
      padding:28px;
      border: 1px solid rgba(184,154,89,0.08);
      backdrop-filter: blur(6px);
    }

    header{
      display:flex;
      gap:20px;
      align-items:center;
      justify-content:space-between;
      margin-bottom:18px;
    }

    .brand{
      display:flex;
      gap:16px;
      align-items:center;
    }

    .monogram{
      width:64px;
      height:64px;
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      background: linear-gradient(135deg,var(--gold-1),var(--gold-2));
      color: #fff;
      font-family: "Playfair Display", serif;
      font-weight:700;
      font-size:20px;
      box-shadow: 0 6px 18px rgba(184,134,11,0.18);
    }

    h1{
      margin:0;
      font-family:"Playfair Display", serif;
      font-weight:600;
      font-size:20px;
      color:var(--accent);
      letter-spacing:0.2px;
    }

    header p{
      margin:0;
      color:var(--muted);
      font-size:13px;
      max-width:560px;
    }

    .contact{
      text-align:right;
      font-size:13px;
      color:var(--muted);
    }
    .contact .phone{
      display:block;
      font-weight:600;
      color:var(--accent);
      margin-top:6px;
    }

    /* grid de cartões */
    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
      gap:16px;
      margin-top:18px;
    }

    .card{
      background:var(--card);
      border-radius:12px;
      padding:16px;
      box-shadow: 0 6px 18px rgba(11,15,31,0.04);
      border:1px solid rgba(184,154,89,0.06);
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      min-height:120px;
    }

    .card .title{
      font-family:"Playfair Display", serif;
      font-weight:600;
      font-size:15px;
      margin-bottom:8px;
      color: #0b1220;
    }

    .muted{
      color:var(--muted);
      font-size:13px;
      margin-bottom:10px;
    }

    .status{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      font-weight:700;
      font-size:12px;
      letter-spacing:0.2px;
    }

    .available{
      background: linear-gradient(90deg, rgba(233,245,241,0.6), rgba(237,250,249,0.6));
      color:#065f46;
    }

    .chosen{
      background: linear-gradient(90deg, rgba(248,247,246,1), rgba(250,245,238,0.6));
      color:var(--muted);
    }

    .card-actions{
      margin-top:12px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:flex-start;
    }

    .btn{
      border:0;
      padding:10px 14px;
      border-radius:10px;
      cursor:pointer;
      font-weight:700;
      font-size:13px;
      box-shadow: 0 6px 18px rgba(11,15,31,0.04);
    }

    .btn-choose{
      background: linear-gradient(90deg,var(--gold-1),var(--gold-2));
      color: #fff;
    }

    .btn-disabled{
      background:transparent;
      color:var(--muted);
      border:1px dashed rgba(11,15,31,0.05);
    }

    /* footer utilidades */
    footer{
      margin-top:20px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
      color:var(--muted);
      font-size:13px;
    }

    .controls{
      display:flex;
      gap:10px;
      align-items:center;
    }

    .tiny{
      font-size:12px;
      color:#8b8b8b;
    }

    /* modal */
    .modal-backdrop{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(11,15,31,0.45);
      z-index:60;
    }

    .modal{
      background:var(--card);
      border-radius:12px;
      padding:18px;
      width:100%;
      max-width:420px;
      box-shadow: 0 12px 40px rgba(11,15,31,0.25);
      border:1px solid rgba(184,154,89,0.06);
    }

    .modal h3{
      margin:0 0 10px 0;
      font-family:"Playfair Display", serif;
      font-weight:600;
      font-size:18px;
      color:var(--accent);
    }

    .input{
      width:100%;
      padding:10px 12px;
      border-radius:8px;
      border:1px solid rgba(11,15,31,0.06);
      font-size:14px;
      margin-top:8px;
    }

    .modal .modal-bottom{
      display:flex;
      justify-content:flex-end;
      gap:10px;
      margin-top:12px;
    }

    @media (max-width:520px){
      body{padding:18px}
      .monogram{width:54px;height:54px;font-size:18px}
    }
  </style>
</head>
<body>
  <div class="wrap" role="application" aria-label="Lista de Presentes Cris e Edson">
    <header>
      <div class="brand" aria-hidden="false">
        <div class="monogram" aria-hidden="true">C & E</div>
        <div>
          <h1>Lista de Presentes — Cris & Edson</h1>
          <p>Escolha um presente da lista. Ao confirmar, envie a mensagem automática pelo WhatsApp para que possamos agradecer pessoalmente.</p>
        </div>
      </div>

      <div class="contact" aria-hidden="false">
        <div class="tiny">Confirmação via WhatsApp</div>
        <div class="phone">+55 79 99914-5044</div>
      </div>
    </header>

    <main>
      <section id="grid" class="grid" aria-live="polite"></section>
    </main>

    <footer>
      <div class="tiny">Dica: abra este link no celular para que o botão direcione ao WhatsApp automaticamente.</div>
      <div class="controls">
        <button id="export" class="btn btn-disabled">Exportar CSV</button>
        <button id="reset" class="btn btn-disabled">Reiniciar lista</button>
      </div>
    </footer>
  </div>

  <!-- Modal -->
  <div id="modal" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <h3>Confirmar presente</h3>
      <div id="modal-item" class="muted">—</div>

      <label for="guest" class="tiny" style="display:block;margin-top:12px;color:var(--muted)">Seu nome (para aparecer na lista)</label>
      <input id="guest" class="input" type="text" placeholder="Digite seu nome completo" />

      <div class="modal-bottom">
        <button id="cancel" class="btn btn-disabled">Cancelar</button>
        <button id="confirm" class="btn btn-choose">Enviar pelo WhatsApp</button>
      </div>
    </div>
  </div>

  <script>
    const WHATSAPP_NUMBER = '5579999145044';

    const initialItems = [
      'Garrafa térmica/ café (Branca)',
      'Sanduicheira elétrica (preta)',
      'Liquidificador (preto)',
      'Conjuntos de copos',
      'Espremedor de frutas (preto)',
      'Xícaras com Pires (brancas)',
      'Jogo de potes herméticos (preto)',
      'Jarra de suco (vidro)',
      'Jogo de Frigideiras (antiaderente)',
      'Kit galheteiro com suporte (Óleo azeite e vinagre)',
      'Kit de forma para bolo',
      'Jogo de utensílios silicone (preto)',
      'Cobre leito (Queen)',
      'Cobertor',
      'Edredom solteiro',
      'Kit toalha de banho',
      'Kit toalhas de rosto',
      'Manta para sofá (Off-white) branco'
    ];

    // localStorage key
    const STORAGE_KEY = 'lista_presentes_cris_edson_v2';

    function loadState(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return initialItems.map(name => ({ name, chosen:false, by:'' }));
        return JSON.parse(raw);
      } catch(e){
        return initialItems.map(name => ({ name, chosen:false, by:'' }));
      }
    }

    function saveState(state){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    }

    let items = loadState();
    const grid = document.getElementById('grid');

    const modalBackdrop = document.getElementById('modal');
    const modalItem = document.getElementById('modal-item');
    const guestInput = document.getElementById('guest');
    const btnConfirm = document.getElementById('confirm');
    const btnCancel = document.getElementById('cancel');
    let currentIndex = null;

    function render(){
      grid.innerHTML = '';
      items.forEach((it, idx) => {
        const card = document.createElement('article');
        card.className = 'card';
        card.setAttribute('aria-label', it.name);

        // título
        const title = document.createElement('div');
        title.className = 'title';
        title.textContent = it.name;
        card.appendChild(title);

        // status
        const statusWrap = document.createElement('div');
        statusWrap.className = 'muted';
        const badge = document.createElement('span');
        badge.className = 'status ' + (it.chosen ? 'chosen' : 'available');
        badge.textContent = it.chosen ? ('Escolhido por ' + it.by) : 'Disponível';
        statusWrap.appendChild(badge);
        card.appendChild(statusWrap);

        // actions
        const actions = document.createElement('div');
        actions.className = 'card-actions';
        if(!it.chosen){
          const btn = document.createElement('button');
          btn.className = 'btn btn-choose';
          btn.textContent = 'Escolher este presente';
          btn.addEventListener('click', () => openModal(idx));
          actions.appendChild(btn);
        } else {
          const btn = document.createElement('button');
          btn.className = 'btn btn-disabled';
          btn.textContent = 'Já escolhido';
          btn.disabled = true;
          actions.appendChild(btn);
        }
        card.appendChild(actions);

        grid.appendChild(card);
      });
    }

    function openModal(index){
      currentIndex = index;
      modalItem.textContent = items[index].name;
      guestInput.value = '';
      modalBackdrop.style.display = 'flex';
      modalBackdrop.setAttribute('aria-hidden','false');
      setTimeout(()=>guestInput.focus(), 80);
    }

    function closeModal(){
      modalBackdrop.style.display = 'none';
      modalBackdrop.setAttribute('aria-hidden','true');
      currentIndex = null;
    }

    btnCancel.addEventListener('click', closeModal);

    btnConfirm.addEventListener('click', () => {
      const name = guestInput.value.trim();
      if(!name){
        alert('Por favor, digite seu nome para que possamos agradecer.');
        guestInput.focus();
        return;
      }
      const item = items[currentIndex];
      // marca otimista
      items[currentIndex].chosen = true;
      items[currentIndex].by = name;
      saveState(items);
      render();
      closeModal();

      const text = encodeURIComponent(`Olá Cris e Edson! Quero confirmar que escolhi o presente: ${item.name}. Com carinho, ${name}.`);
      const waUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${text}`;
      window.open(waUrl, '_blank');
    });

    // Reiniciar
    document.getElementById('reset').addEventListener('click', () => {
      if(!confirm('Tem certeza que deseja reiniciar a lista? Todos os nomes salvos localmente serão removidos.')) return;
      items = initialItems.map(name => ({ name, chosen:false, by:'' }));
      saveState(items);
      render();
    });

    // Export CSV
    document.getElementById('export').addEventListener('click', () => {
      const rows = [['Presente','Status','Presente dado por']];
      items.forEach(i => rows.push([i.name, i.chosen ? 'Escolhido' : 'Disponível', i.by]));
      const csv = rows.map(r => r.map(c => `"${String(c).replace(/"/g,'""')}"`).join(',')).join('\n');
      const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'lista-presentes-cris-edson.csv';
      a.click();
      URL.revokeObjectURL(url);
    });

    // Inicializa
    render();

    // Fechar modal com Esc ou clicando fora
    window.addEventListener('keydown', (e) => { if(e.key === 'Escape') closeModal(); });
    modalBackdrop.addEventListener('click', (e) => { if(e.target === modalBackdrop) closeModal(); });

  </script>
</body>
</html>
